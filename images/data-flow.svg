<svg width="900" height="280" viewBox="0 0 900 280" xmlns="http://www.w3.org/2000/svg">
  <style>
    .box { fill:#fdfdfd; stroke:#333; stroke-width:1.4; rx:10; ry:10; }
    .title { font-family: system-ui, sans-serif; font-size:18px; font-weight:600; fill:#222; }
    .label { font-family: system-ui, sans-serif; font-size:13px; fill:#222; }
    .small { font-family: system-ui, sans-serif; font-size:11px; fill:#555; }
    .arrow { stroke:#333; stroke-width:1.6; marker-end:url(#arrowhead); fill:none; }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="9" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 9 3, 0 6" fill="#333"/>
    </marker>
  </defs>

  <text x="450" y="26" text-anchor="middle" class="title">Data Flow – R700 → Node-RED → 3rd Party</text>

  <!-- Step 1 -->
  <rect x="30" y="80" width="170" height="80" class="box"/>
  <text x="115" y="108" text-anchor="middle" class="label">Tag read</text>
  <text x="115" y="126" text-anchor="middle" class="small">EPC, antenna, RSSI</text>

  <!-- Step 2 -->
  <rect x="230" y="80" width="190" height="80" class="box"/>
  <text x="325" y="104" text-anchor="middle" class="label">R700 IoT event</text>
  <text x="325" y="122" text-anchor="middle" class="small">JSON: readerEvent[]</text>
  <text x="325" y="138" text-anchor="middle" class="small">hostname, timestamp, epcHex</text>

  <!-- Step 3 -->
  <rect x="460" y="80" width="190" height="80" class="box"/>
  <text x="555" y="104" text-anchor="middle" class="label">Node-RED normalized</text>
  <text x="555" y="122" text-anchor="middle" class="small">filter tagInventory</text>
  <text x="555" y="138" text-anchor="middle" class="small">extract isoTime + hostname</text>

  <!-- Step 4 -->
  <rect x="690" y="80" width="180" height="80" class="box"/>
  <text x="780" y="100" text-anchor="middle" class="label">3rd Party event payload</text>
  <text x="780" y="120" text-anchor="middle" class="small">{attributes.time,</text>
  <text x="780" y="136" text-anchor="middle" class="small">event_type_uid, camera_id, time_ms}</text>

  <!-- Arrows -->
  <line x1="200" y1="120" x2="230" y2="120" class="arrow"/>
  <text x="215" y="106" text-anchor="middle" class="small">firmware</text>

  <line x1="420" y1="120" x2="460" y2="120" class="arrow"/>
  <text x="440" y="106" text-anchor="middle" class="small">Webhook / MQTT</text>

  <line x1="650" y1="120" x2="690" y2="120" class="arrow"/>
  <text x="670" y="106" text-anchor="middle" class="small">HTTP POST</text>

  <!-- Bottom notes -->
  <text x="450" y="210" text-anchor="middle" class="small">
    Node-RED also logs original R700 events and 3rd Party responses for audit and troubleshooting.
  </text>
</svg>
